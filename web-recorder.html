<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice CRM - EF San Juan</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 50%, #3d7ab5 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 40px 32px;
            max-width: 440px;
            width: 100%;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.4);
        }
        .logo {
            text-align: center;
            margin-bottom: 24px;
        }
        .logo-text {
            font-size: 28px;
            font-weight: 700;
            color: #1e3a5f;
            letter-spacing: -0.5px;
        }
        .logo-subtitle {
            font-size: 12px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 4px;
        }
        h1 {
            color: #1f2937;
            font-size: 22px;
            text-align: center;
            margin-bottom: 8px;
        }
        .subtitle {
            color: #64748b;
            font-size: 14px;
            text-align: center;
            margin-bottom: 32px;
        }
        .record-btn {
            width: 100%;
            padding: 18px 24px;
            font-size: 17px;
            font-weight: 600;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        .record-btn.start {
            background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%);
            color: white;
        }
        .record-btn.start:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(30, 58, 95, 0.3);
        }
        .record-btn.stop {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            color: white;
            animation: pulse 1.5s infinite;
        }
        .record-btn.submit {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
            color: white;
        }
        .record-btn.submit:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(16, 185, 129, 0.3);
        }
        .record-btn.secondary {
            background: #f1f5f9;
            color: #475569;
        }
        .record-btn.secondary:hover {
            background: #e2e8f0;
        }
        .record-btn.view-lead {
            background: linear-gradient(135deg, #1e3a5f 0%, #2d5a87 100%);
            color: white;
            text-decoration: none;
        }
        .record-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.9; transform: scale(0.98); }
        }
        .recording-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
            font-size: 16px;
            color: #dc2626;
            font-weight: 500;
        }
        .red-dot {
            width: 14px;
            height: 14px;
            background: #dc2626;
            border-radius: 50%;
            animation: blink 1s infinite;
        }
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }
        .status {
            padding: 20px;
            border-radius: 14px;
            margin-bottom: 24px;
            text-align: center;
        }
        .status.processing {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            color: #92400e;
        }
        .status.processing .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #fbbf24;
            border-top-color: #92400e;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
            vertical-align: middle;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .status.success {
            background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
            color: #065f46;
        }
        .status.error {
            background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
            color: #991b1b;
        }
        .success-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }
        .success-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        .lead-name {
            font-weight: 600;
            font-size: 18px;
            margin: 8px 0 16px;
            color: #047857;
        }
        .result-fields {
            background: white;
            padding: 16px;
            border-radius: 10px;
            margin: 16px 0;
            text-align: left;
        }
        .result-field {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e5e7eb;
            font-size: 14px;
        }
        .result-field:last-child {
            border-bottom: none;
        }
        .result-field .label {
            color: #6b7280;
            font-weight: 500;
        }
        .result-field .value {
            color: #111827;
            font-weight: 600;
            text-align: right;
            max-width: 60%;
        }
        .tips {
            background: #f8fafc;
            padding: 20px;
            border-radius: 14px;
            margin-top: 28px;
            border: 1px solid #e2e8f0;
        }
        .tips h3 {
            font-size: 13px;
            color: #475569;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .tips ul {
            font-size: 14px;
            color: #64748b;
            padding-left: 20px;
            line-height: 1.8;
        }
        .button-group {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }
        .button-group button, .button-group a {
            flex: 1;
        }
        a.btn-link {
            text-decoration: none;
        }
        .hidden { display: none !important; }

        /* User header */
        .user-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
            padding: 12px 16px;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 12px;
            border: 1px solid #bae6fd;
        }
        .user-header .user-name {
            font-weight: 600;
            color: #0369a1;
        }
        .user-header .switch-btn {
            font-size: 12px;
            color: #64748b;
            text-decoration: underline;
            cursor: pointer;
            background: none;
            border: none;
            padding: 0;
        }
        .user-header .switch-btn:hover {
            color: #1e3a5f;
        }

        /* Sales rep selection overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }
        .overlay-content {
            background: white;
            border-radius: 20px;
            padding: 28px;
            max-width: 360px;
            width: 100%;
            max-height: 85vh;
            display: flex;
            flex-direction: column;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }
        .overlay-content h2 {
            color: #1f2937;
            font-size: 20px;
            margin-bottom: 6px;
            text-align: center;
        }
        .overlay-content p {
            color: #64748b;
            font-size: 14px;
            margin-bottom: 16px;
            text-align: center;
        }
        .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 15px;
            margin-bottom: 12px;
            outline: none;
            transition: border-color 0.2s;
        }
        .search-input:focus {
            border-color: #1e3a5f;
        }
        .search-input::placeholder {
            color: #9ca3af;
        }
        .rep-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
            overflow-y: auto;
            max-height: 50vh;
            padding-right: 4px;
        }
        .rep-list::-webkit-scrollbar {
            width: 6px;
        }
        .rep-list::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 3px;
        }
        .rep-list::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 3px;
        }
        .rep-option {
            padding: 14px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.15s;
            text-align: left;
            flex-shrink: 0;
        }
        .rep-option:hover {
            border-color: #1e3a5f;
            background: #f0f9ff;
            transform: translateX(2px);
        }
        .rep-option .rep-name {
            font-weight: 600;
            color: #111827;
            font-size: 16px;
        }
        .rep-option .rep-email {
            font-size: 12px;
            color: #64748b;
            margin-top: 2px;
        }
        .loading-reps {
            text-align: center;
            padding: 40px;
            color: #64748b;
        }
        .no-results {
            text-align: center;
            padding: 24px;
            color: #9ca3af;
            font-size: 14px;
        }
        .persistence-note {
            margin-top: 16px;
            padding: 10px;
            background: #f0fdf4;
            border-radius: 8px;
            font-size: 12px;
            color: #166534;
            text-align: center;
        }

        /* Transcription editing */
        .transcription-edit {
            margin-bottom: 20px;
        }
        .transcription-edit label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
        }
        .transcription-edit textarea {
            width: 100%;
            min-height: 120px;
            padding: 14px;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-family: inherit;
            font-size: 15px;
            line-height: 1.5;
            resize: vertical;
            transition: border-color 0.2s;
        }
        .transcription-edit textarea:focus {
            outline: none;
            border-color: #1e3a5f;
        }
        .transcription-hint {
            font-size: 12px;
            color: #9ca3af;
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <!-- Sales Rep Selection Overlay -->
    <div class="overlay hidden" id="repSelectionOverlay">
        <div class="overlay-content">
            <h2>Select Your Name</h2>
            <p>Choose your profile to get started</p>
            <input type="text" class="search-input" id="repSearchInput" placeholder="Search by name..." oninput="filterSalesReps()">
            <div class="rep-list" id="repList">
                <div class="loading-reps">Loading...</div>
            </div>
            <div class="persistence-note">Your selection will be saved on this device</div>
        </div>
    </div>

    <div class="container">
        <!-- User Header (shows after selection) -->
        <div class="user-header hidden" id="userHeader">
            <span>Logged in as</span>
            <span class="user-name" id="currentUserName">-</span>
            <button class="switch-btn" onclick="showRepSelection()">Switch</button>
        </div>

        <!-- Logo -->
        <div class="logo">
            <div class="logo-text">EF San Juan</div>
            <div class="logo-subtitle">Custom Millwork</div>
        </div>

        <h1>Voice CRM</h1>
        <p class="subtitle">Add leads, log calls, update status, or create tasks</p>

        <!-- Status Messages -->
        <div class="status processing hidden" id="processing">
            <span class="spinner"></span>
            <span id="processingText">Transcribing...</span>
        </div>

        <div class="status success hidden" id="success">
            <div class="success-icon">&#10003;</div>
            <div class="success-title" id="successTitle">Success!</div>
            <p class="lead-name" id="leadName"></p>
            <div class="result-fields" id="resultFields"></div>
        </div>

        <div class="status error hidden" id="error">
            <span id="errorMessage"></span>
        </div>

        <!-- Recording Controls -->
        <div id="controls">
            <button class="record-btn start" id="startBtn" onclick="startRecording()">
                <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
                    <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
                </svg>
                Start Recording
            </button>

            <div class="hidden" id="recordingState">
                <div class="recording-indicator">
                    <div class="red-dot"></div>
                    <span>Recording...</span>
                </div>
                <button class="record-btn stop" onclick="stopRecording()">
                    <svg width="24" height="24" fill="currentColor" viewBox="0 0 24 24">
                        <rect x="6" y="6" width="12" height="12" rx="2"/>
                    </svg>
                    Stop Recording
                </button>
            </div>
        </div>

        <!-- Transcription Edit State -->
        <div class="hidden" id="editState">
            <div class="transcription-edit">
                <label for="transcriptionText">Review & Edit Transcription</label>
                <textarea id="transcriptionText" placeholder="Your transcription will appear here..."></textarea>
                <p class="transcription-hint">Edit if needed, then submit to create the record.</p>
            </div>
            <div class="button-group">
                <button class="record-btn submit" onclick="submitTranscription()">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    Submit
                </button>
                <button class="record-btn secondary" onclick="reset()">
                    Re-record
                </button>
            </div>
        </div>

        <!-- Success Actions -->
        <div class="hidden" id="successActions">
            <div class="button-group">
                <a class="btn-link hidden" id="openLeadLink" href="#" target="_blank">
                    <button class="record-btn view-lead" style="width:100%">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"/>
                        </svg>
                        View in Airtable
                    </button>
                </a>
                <button class="record-btn start" onclick="reset()">
                    <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                    Add Another
                </button>
            </div>
        </div>

        <!-- Tips -->
        <div class="tips" id="tips">
            <h3>What You Can Say</h3>
            <ul>
                <li><strong>New Lead:</strong> "New lead from John Smith at 555-1234, interested in custom doors"</li>
                <li><strong>Call Note:</strong> "Just talked to John Smith, he wants to schedule a site visit next week"</li>
                <li><strong>Status Update:</strong> "Mark John Smith as qualified, he's ready to move forward"</li>
                <li><strong>Task:</strong> "Remind me to call John Smith tomorrow about the quote"</li>
            </ul>
        </div>
    </div>

    <script>
        // Configuration - auto-detect API URL from where page is served
        const API_URL = window.location.origin;

        // Sales Rep State (persisted in localStorage)
        let currentSalesRep = null;  // { id: string, name: string, email: string }

        // State
        let mediaRecorder = null;
        let audioChunks = [];
        let audioBlob = null;

        // DOM Elements
        const startBtn = document.getElementById('startBtn');
        const recordingState = document.getElementById('recordingState');
        const editState = document.getElementById('editState');
        const transcriptionText = document.getElementById('transcriptionText');
        const processing = document.getElementById('processing');
        const processingText = document.getElementById('processingText');
        const success = document.getElementById('success');
        const successTitle = document.getElementById('successTitle');
        const error = document.getElementById('error');
        const errorMessage = document.getElementById('errorMessage');
        const leadName = document.getElementById('leadName');
        const resultFields = document.getElementById('resultFields');
        const successActions = document.getElementById('successActions');
        const openLeadLink = document.getElementById('openLeadLink');
        const tips = document.getElementById('tips');
        const repSelectionOverlay = document.getElementById('repSelectionOverlay');
        const repList = document.getElementById('repList');
        const repSearchInput = document.getElementById('repSearchInput');
        const userHeader = document.getElementById('userHeader');
        const currentUserName = document.getElementById('currentUserName');

        // Store all sales reps for filtering
        let allSalesReps = [];

        // Intent display configuration
        const intentConfig = {
            'new_lead': { title: 'New Lead', successTitle: 'Lead Created!', icon: '&#128100;' },
            'call_note': { title: 'Call Note', successTitle: 'Activity Logged!', icon: '&#128222;' },
            'status_update': { title: 'Status Update', successTitle: 'Status Updated!', icon: '&#128202;' },
            'task': { title: 'New Task', successTitle: 'Task Created!', icon: '&#9989;' }
        };

        // ===========================================
        // Sales Rep Selection Functions
        // ===========================================

        async function loadSalesReps() {
            try {
                const response = await fetch(API_URL + '/api/sales-reps');
                const data = await response.json();

                if (data.success && data.sales_reps.length > 0) {
                    allSalesReps = data.sales_reps;  // Store for filtering
                    renderSalesReps(allSalesReps);
                } else {
                    repList.innerHTML = '<div class="loading-reps">No sales reps found. Please check Airtable configuration.</div>';
                }
            } catch (err) {
                console.error('Failed to load sales reps:', err);
                repList.innerHTML = '<div class="loading-reps">Failed to load sales reps. Please refresh.</div>';
            }
        }

        function renderSalesReps(reps) {
            repList.innerHTML = '';
            if (reps.length === 0) {
                repList.innerHTML = '<div class="no-results">No matching sales reps</div>';
                return;
            }
            reps.forEach(rep => {
                const option = document.createElement('div');
                option.className = 'rep-option';
                option.onclick = () => selectSalesRep(rep);
                option.innerHTML = `
                    <div class="rep-name">${rep.name}</div>
                    ${rep.email ? `<div class="rep-email">${rep.email}</div>` : ''}
                `;
                repList.appendChild(option);
            });
        }

        function filterSalesReps() {
            const query = repSearchInput.value.toLowerCase().trim();
            if (!query) {
                renderSalesReps(allSalesReps);
                return;
            }
            const filtered = allSalesReps.filter(rep =>
                rep.name.toLowerCase().includes(query) ||
                (rep.email && rep.email.toLowerCase().includes(query))
            );
            renderSalesReps(filtered);
        }

        function selectSalesRep(rep) {
            currentSalesRep = rep;
            localStorage.setItem('voiceCRM_salesRep', JSON.stringify(rep));

            // Update UI
            currentUserName.textContent = rep.name;
            userHeader.classList.remove('hidden');
            repSelectionOverlay.classList.add('hidden');

            console.log('Selected sales rep:', rep.name, rep.id);
        }

        function showRepSelection() {
            repSearchInput.value = '';  // Clear search
            loadSalesReps();
            repSelectionOverlay.classList.remove('hidden');
        }

        function initSalesRep() {
            // Check localStorage for existing selection
            const stored = localStorage.getItem('voiceCRM_salesRep');
            if (stored) {
                try {
                    currentSalesRep = JSON.parse(stored);
                    currentUserName.textContent = currentSalesRep.name;
                    userHeader.classList.remove('hidden');
                    console.log('Restored sales rep:', currentSalesRep.name);
                } catch (e) {
                    // Invalid stored data, show selection
                    showRepSelection();
                }
            } else {
                // No stored rep, show selection
                showRepSelection();
            }
        }

        async function startRecording() {
            try {
                hideAll();
                tips.classList.add('hidden');

                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream, { mimeType: 'audio/webm' });
                audioChunks = [];

                mediaRecorder.ondataavailable = (e) => {
                    if (e.data.size > 0) audioChunks.push(e.data);
                };

                mediaRecorder.onstop = () => {
                    audioBlob = new Blob(audioChunks, { type: 'audio/webm' });
                    stream.getTracks().forEach(track => track.stop());
                    transcribeAudio();
                };

                mediaRecorder.start();
                startBtn.classList.add('hidden');
                recordingState.classList.remove('hidden');

            } catch (err) {
                showError('Microphone access denied. Please allow microphone access and try again.');
                tips.classList.remove('hidden');
            }
        }

        function stopRecording() {
            if (mediaRecorder && mediaRecorder.state === 'recording') {
                mediaRecorder.stop();
            }
        }

        async function transcribeAudio() {
            if (!audioBlob) return;

            hideAll();
            processingText.textContent = 'Transcribing...';
            processing.classList.remove('hidden');

            try {
                const formData = new FormData();
                formData.append('audio', audioBlob, 'recording.webm');

                const response = await fetch(API_URL + '/api/transcribe', {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();

                if (data.transcription) {
                    showEditState(data.transcription);
                } else {
                    showError('Could not transcribe audio. Please try again.');
                }

            } catch (err) {
                showError('Connection failed. Please check your internet connection.');
            }
        }

        function showEditState(transcription) {
            processing.classList.add('hidden');
            editState.classList.remove('hidden');
            transcriptionText.value = transcription;
            transcriptionText.focus();
        }

        async function submitTranscription() {
            const text = transcriptionText.value.trim();
            if (!text) {
                showError('Please enter some text before submitting.');
                return;
            }

            // Require sales rep selection
            if (!currentSalesRep) {
                showRepSelection();
                return;
            }

            hideAll();
            processingText.textContent = 'Processing...';
            processing.classList.remove('hidden');

            try {
                // Include sales_rep_id in the request
                const payload = {
                    transcription: text,
                    sales_rep_id: currentSalesRep.id
                };

                const response = await fetch(API_URL + '/webhook/wispr', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const data = await response.json();

                if (data.status === 'created' || data.status === 'updated') {
                    showSuccess(data);
                } else if (data.status === 'error') {
                    showError(data.message || 'Failed to create record. Please try again.');
                } else {
                    showError(data.message || 'Could not process your request.');
                }

            } catch (err) {
                showError('Connection failed. Please check your internet connection.');
            }
        }

        function showSuccess(data) {
            processing.classList.add('hidden');
            success.classList.remove('hidden');
            successActions.classList.remove('hidden');

            // Get intent-specific config
            const intent = data.intent || 'new_lead';
            const config = intentConfig[intent] || intentConfig['new_lead'];

            // Set title based on intent
            successTitle.textContent = config.successTitle;

            // Set record name
            leadName.textContent = data.record_name || 'Record Created';

            // Build result fields based on intent
            resultFields.replaceChildren();
            addResultField(resultFields, 'Type', config.title);

            if (data.fields_populated && data.fields_populated.length > 0) {
                // Show a subset of key populated fields
                const keyFields = data.fields_populated.slice(0, 4);
                keyFields.forEach(field => {
                    if (!field.includes('(default)') && !field.includes('Notes')) {
                        addResultField(resultFields, field, '&#10003;');
                    }
                });
            }

            // Set Airtable link
            if (data.airtable_url) {
                openLeadLink.href = data.airtable_url;
                openLeadLink.classList.remove('hidden');
            } else {
                openLeadLink.classList.add('hidden');
            }
        }

        function addResultField(container, label, value) {
            const div = document.createElement('div');
            div.className = 'result-field';

            const labelSpan = document.createElement('span');
            labelSpan.className = 'label';
            labelSpan.textContent = label;

            const valueSpan = document.createElement('span');
            valueSpan.className = 'value';
            valueSpan.innerHTML = value;

            div.appendChild(labelSpan);
            div.appendChild(valueSpan);
            container.appendChild(div);
        }

        function showError(message) {
            processing.classList.add('hidden');
            editState.classList.add('hidden');
            error.classList.remove('hidden');
            errorMessage.textContent = message;

            // Show re-record option
            setTimeout(() => {
                editState.classList.remove('hidden');
            }, 100);
        }

        function hideAll() {
            startBtn.classList.add('hidden');
            recordingState.classList.add('hidden');
            editState.classList.add('hidden');
            processing.classList.add('hidden');
            success.classList.add('hidden');
            error.classList.add('hidden');
            successActions.classList.add('hidden');
        }

        function reset() {
            audioBlob = null;
            audioChunks = [];
            transcriptionText.value = '';
            hideAll();
            startBtn.classList.remove('hidden');
            tips.classList.remove('hidden');
            error.classList.add('hidden');
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initSalesRep();
        });
    </script>
</body>
</html>
